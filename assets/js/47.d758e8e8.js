(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{401:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"обновление-с-1-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#обновление-с-1-x"}},[t._v("#")]),t._v(" Обновление с 1.x")]),t._v(" "),a("p",[t._v("Laravel Actions v2 был переписан с нуля и предлагает несколько иную парадигму, чем v1. Поэтому, честно говоря, обновление до версии 2 не будет тривиальным.")]),t._v(" "),a("h2",{attrs:{id:"другая-парадигма"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#другая-парадигма"}},[t._v("#")]),t._v(" Другая парадигма")]),t._v(" "),a("p",[t._v("Основное отличие состоит в том, что v1 использует массив атрибутов - аналогично тому, как работают модели Eloquent - для унификации данных между шаблонами (то есть контроллерами, заданиями, слушателями и т. д.).")]),t._v(" "),a("p",[t._v("Кроме того, само действие становится шаблоном. Итак, если Вы выполняете действие как контроллер и задание, действие должно действовать как контроллер и как задание.")]),t._v(" "),a("p",[t._v("Это требует, чтобы действие расширяло класс "),a("code",[t._v("Action")]),t._v(", который действует как гибрид всех поддерживаемых шаблонов и переопределяет некоторые основные компоненты Laravel, чтобы это работало.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UpdateUserPassword")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Action")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" void\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'password'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("С другой стороны, v2 больше не заставляет Ваши действия что-либо расширять и дает Вам свободу писать классы действий именно такими, какими Вы хотите их видеть. Вместо этого он использует трейты для предоставления вспомогательных методов и распознавания того, что Ваше действие должно выполняться определенным образом.")]),t._v(" "),a("p",[t._v("Каждый шаблон имеет свой собственный трейт — "),a("code",[t._v("AsController")]),t._v(", "),a("code",[t._v("AsJob")]),t._v(" и т. д. - и объединяется в трейт "),a("code",[t._v("AsAction")]),t._v(' (Смотрите "'),a("a",{attrs:{href:"./granular-traits"}},[t._v("Более детализированные трейты")]),t._v('").')]),t._v(" "),a("p",[t._v('Кроме того, Ваше действие больше не используется напрямую в качестве шаблона. Вместо этого он заключен в декоратор, который будет делегировать Ваши действия, когда это необходимо (Смотрите "'),a("a",{attrs:{href:"./how-does-it-work"}},[t._v("Как это работает?")]),t._v('").')]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UpdateUserPassword")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("AsAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$newPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" void\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'password'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$newPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Суть в том, что рефакторинг с v1 на v2 может быть хорошей возможностью переосмыслить некоторые из Ваших действий теперь, когда Вы можете реализовать их без каких-либо ограничений.")]),t._v(" "),a("p",[t._v("Хотя невозможно предоставить пошаговое руководство по обновлению до версии 2, следующие разделы посвящены предоставлению фрагмента кода до/после, чтобы помочь Вам увидеть, что изменилось.")]),t._v(" "),a("h2",{attrs:{id:"больше-никаких-атрибутов"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#больше-никаких-атрибутов"}},[t._v("#")]),t._v(" Больше никаких атрибутов")]),t._v(" "),a("p",[t._v("В Ваших действиях больше нет набора атрибутов.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateNewArticle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Action")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Article\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("articles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateNewArticle")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("AsAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$author")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Article\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$author")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("articles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"авторизация-и-проверка-только-для-контроллеров"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#авторизация-и-проверка-только-для-контроллеров"}},[t._v("#")]),t._v(" Авторизация и проверка только для контроллеров")]),t._v(" "),a("p",[t._v("Поскольку у нас больше нет атрибутов для унификации данных между шаблонами, авторизация и проверка будут влиять на действие только тогда, когда оно выполняется как контроллер - и, следовательно, когда запрос доступен.")]),t._v(" "),a("h2",{attrs:{id:"внедрение-зависимостеи-в-конструкторе"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#внедрение-зависимостеи-в-конструкторе"}},[t._v("#")]),t._v(" Внедрение зависимостей в конструкторе")]),t._v(" "),a("p",[t._v("Поскольку Ваши действия всегда будут разрешаться из контейнера, теперь Вы можете использовать метод "),a("code",[t._v("__construct")]),t._v(", чтобы добавить некоторые зависимости в Ваше действие.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GetDirectionsToRestaurant")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("AsAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" GoogleMapsService "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$googleMaps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__construct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("GoogleMapsService "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$googleMaps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("googleMaps")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$googleMaps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"один-метод-для-ввода-и-вывода"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#один-метод-для-ввода-и-вывода"}},[t._v("#")]),t._v(" Один метод для ввода и вывода")]),t._v(" "),a("p",[t._v("В версии 1 Вы можете использовать методы "),a("code",[t._v("asX")]),t._v(" для вставки логики "),a("em",[t._v("перед")]),t._v(" выполнением метода "),a("code",[t._v("handle")]),t._v(" и/или методы "),a("code",[t._v("getAttributesFromX")]),t._v(" для обеспечения пользовательского синтаксического анализа между шаблоном и атрибутами. Затем Вам нужно будет реализовать другой метод, такой как "),a("code",[t._v("response")]),t._v(" или "),a("code",[t._v("consoleOutput")]),t._v(", чтобы вставить логику "),a("em",[t._v("после")]),t._v(" метода "),a("code",[t._v("handle")]),t._v(".")]),t._v(" "),a("p",[t._v("В версии 2 Вам больше не нужно помнить, какой метод вызывать для привязки данных до и/или после каждого шаблона. Вместо этого у Вас есть ровно одна точка входа для каждого шаблона: "),a("code",[t._v("asController")]),t._v(", "),a("code",[t._v("asCommand")]),t._v(".")]),t._v(" "),a("p",[t._v("Эти методы теперь отвечают как за ввод, так и за вывод этого шаблона, поскольку Вы будете вызывать метод "),a("code",[t._v("handle")]),t._v(" прямо там.")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateNewArticle")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Action")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttributesFromCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Command "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("actingAs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOrFail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("argument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'user_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("argument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("argument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Article\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("articles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("consoleOutput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$article")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Command "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" void\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"Article \\"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$article")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('\\" created."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateNewArticle")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("AsAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$author")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" string "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Article\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$author")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("articles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Command "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Article\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$article")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOrFail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("argument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'user_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("argument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("argument")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'body'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"Article \\"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$article")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('\\" created."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"очередь-феиков-и-декораторов-джоба"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#очередь-феиков-и-декораторов-джоба"}},[t._v("#")]),t._v(" Очередь фейков и декораторов джоба")]),t._v(" "),a("p",[t._v("Если Вы используете "),a("code",[t._v("Queue::fake()")]),t._v(" в своих тестах, чтобы убедиться, что действие было отправлено как задание, эти тесты теперь не пройдут из-за того, что задание теперь является "),a("code",[t._v("JobDecorator")]),t._v(", обертывающим Ваше действие, а не само действие.")]),t._v(" "),a("p",[t._v("Чтобы исправить это, Вам просто нужно заменить "),a("code",[t._v("Queue::assertPushed(MyAction::class)")]),t._v(" на "),a("code",[t._v("MyAction::assertPushed()")]),t._v(".")]),t._v(" "),a("p",[t._v("Смотрите "),a("RouterLink",{attrs:{to:"/2.x/dispatch-jobs.html#asserting-jobs-were-pushed"}},[t._v('"Подтверждение заданий, которые были отправлены"')]),t._v(" для получения дополнительной информации.")],1),t._v(" "),a("h2",{attrs:{id:"карта-методов-и-своиств"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#карта-методов-и-своиств"}},[t._v("#")]),t._v(" Карта методов и свойств")]),t._v(" "),a("p",[t._v("В таблице ниже показано соответствие между методами и свойствами, доступными в v1, и доступными в v2, упорядоченными в алфавитном порядке.")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("v1")]),t._v(" "),a("th",[t._v("v2")]),t._v(" "),a("th",[t._v("Комментарии")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("actingAs")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Больше никаких помощников пользователей. Если действие требует, чтобы пользователь работал, просто передайте этого пользователя в качестве аргумента.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("afterValidator")])]),t._v(" "),a("td",[a("code",[t._v("afterValidator")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("all")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("asCommand")])]),t._v(" "),a("td",[a("code",[t._v("asCommand")])]),t._v(" "),a("td",[t._v("То же имя, но другое поведение. "),a("code",[t._v("asCommand")]),t._v(' теперь является единственной точкой входа, когда действие выполняется как команда (Смотрите "'),a("a",{attrs:{href:"#one-method-for-both-input-and-output"}},[t._v("Один метод для ввода и вывода")]),t._v('").')])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("asController")])]),t._v(" "),a("td",[a("code",[t._v("asController")])]),t._v(" "),a("td",[t._v("То же имя, но другое поведение. "),a("code",[t._v("asController")]),t._v(' теперь является единственной точкой входа, когда действие выполняется как контроллер (Смотрите "'),a("a",{attrs:{href:"#one-method-for-both-input-and-output"}},[t._v("Один метод для ввода и вывода")]),t._v('").')])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("asJob")])]),t._v(" "),a("td",[a("code",[t._v("asJob")])]),t._v(" "),a("td",[t._v("То же имя, но другое поведение. "),a("code",[t._v("asJob")]),t._v(' теперь является единственной точкой входа, когда действие отправляется как задание (Смотрите "'),a("a",{attrs:{href:"#one-method-for-both-input-and-output"}},[t._v("Один метод для ввода и вывода")]),t._v('").')])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("asListener")])]),t._v(" "),a("td",[a("code",[t._v("asListener")])]),t._v(" "),a("td",[t._v("То же имя, но другое поведение. "),a("code",[t._v("asListener")]),t._v(' теперь является единственной точкой входа, когда действие выполняется как слушатель (Смотрите "'),a("a",{attrs:{href:"#one-method-for-both-input-and-output"}},[t._v("Один метод для ввода и вывода")]),t._v('").')])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("attributes")])]),t._v(" "),a("td",[a("code",[t._v("getValidationAttributes")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("authorize")])]),t._v(" "),a("td",[a("code",[t._v("authorize")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("can")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("В версии 2 больше нет свойства "),a("code",[t._v("$user")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("$commandSignature")])]),t._v(" "),a("td",[a("code",[t._v("$commandSignature")])]),t._v(" "),a("td",[t._v("То же самое, но должно быть "),a("code",[t._v("public")]),t._v(". В версии 2 Вы также можете использовать метод "),a("code",[t._v("getCommandSignature")]),t._v(" вместо.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("$commandDescription")])]),t._v(" "),a("td",[a("code",[t._v("$commandDescription")])]),t._v(" "),a("td",[t._v("То же самое, но должно быть "),a("code",[t._v("public")]),t._v(". В версии 2 Вы также можете использовать метод "),a("code",[t._v("getCommandDescription")]),t._v(" вместо.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("consoleOutput")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Вы можете предоставить вывод команды непосредственно в методе "),a("code",[t._v("asCommand")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("delegateTo")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Просто используйте вместо этого "),a("code",[t._v("MyOtherAction::run")]),t._v(". То же самое касается "),a("code",[t._v("createFrom")]),t._v(" и "),a("code",[t._v("runAs")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("$errorBag")])]),t._v(" "),a("td",[a("code",[t._v("getValidationErrorBag")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("except")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("failedAuthorization")])]),t._v(" "),a("td",[a("code",[t._v("getAuthorizationFailure")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("failedValidation")])]),t._v(" "),a("td",[a("code",[t._v("getValidationFailure")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("fill")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("get")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("getAttributesFromCommand")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Вы можете анализировать ввод команды непосредственно в методе "),a("code",[t._v("asCommand")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("getAttributesFromConstructor")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("getAttributesFromEvent")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Вы можете анализировать данные события непосредственно в методе "),a("code",[t._v("asListener")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("getAttributesFromRequest")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Вы можете анализировать данные запроса прямо в методе "),a("code",[t._v("asController")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("getRedirectUrl")])]),t._v(" "),a("td",[a("code",[t._v("getValidationRedirect")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("handle")])]),t._v(" "),a("td",[a("code",[t._v("handle")])]),t._v(" "),a("td",[t._v("Тот же метод, но он больше не разрешает атрибуты из своих аргументов, так как v2 больше не имеет атрибутов. Вместо этого у Вас есть полный контроль над подписью Вашего метода.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("has")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("initialized")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Вы можете использовать "),a("code",[t._v("__construct")]),t._v(" вместо.")])]),t._v(" "),a("tr",[a("td",[a("em",[t._v("Added")])]),t._v(" "),a("td",[a("code",[t._v("make")])]),t._v(" "),a("td",[a("em",[t._v("(Статический)")]),t._v(" Эквивалентно "),a("code",[t._v("app(MyAction::class)")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("messages")])]),t._v(" "),a("td",[a("code",[t._v("getValidationMessages")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("middleware")])]),t._v(" "),a("td",[a("code",[t._v("getControllerMiddleware")]),t._v(" или "),a("code",[t._v("getJobMiddleware")])]),t._v(" "),a("td",[t._v("В версии 2 Вам необходимо явно предоставить мидлвар для контроллеров и/или заданий. В версии 1 между ними могли быть конфликты.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("only")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("prepareForValidation")])]),t._v(" "),a("td",[a("code",[t._v("prepareForValidation")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("registered")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("В версии 2 действия распознаются по запросу, а не регистрируются поставщиком услуг.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("response")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Вы можете предоставить ответ контроллера непосредственно в методе "),a("code",[t._v("asController")]),t._v(". Обратите внимание, что "),a("code",[t._v("htmlResponse")]),t._v(" и "),a("code",[t._v("jsonResponse")]),t._v(" все еще существуют.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("routes")])]),t._v(" "),a("td",[a("code",[t._v("routes")])]),t._v(" "),a("td",[a("em",[t._v("(Статический)")]),t._v(' Тот же метод, но Вам нужно указать свои действия у поставщика услуг, чтобы это работало (Смотрите "'),a("RouterLink",{attrs:{to:"/2.x/register-as-controller.html#registering-routes-directly-in-the-action"}},[t._v("Регистрация маршрутов непосредственно в действии")]),t._v('").')],1)]),t._v(" "),a("tr",[a("td",[a("code",[t._v("rules")])]),t._v(" "),a("td",[a("code",[t._v("rules")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("run")])]),t._v(" "),a("td",[a("code",[t._v("run")])]),t._v(" "),a("td",[a("em",[t._v("(Статический)")]),t._v(" То же поведение, но теперь работает только статически. Вы можете использовать "),a("code",[t._v("$action->handle(...)")]),t._v(", если Вы ищете нестатический способ запуска Вашего действия.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("runningAs")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Теперь Ваша логика, специфичная для шаблона, живет в методах "),a("code",[t._v("asX")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("set")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Устарело, поскольку действия больше не имеют атрибутов.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("user")])]),t._v(" "),a("td",[a("em",[t._v("Удалено")])]),t._v(" "),a("td",[t._v("Больше никаких помощников пользователей. Если действие требует, чтобы пользователь работал, просто передайте этого пользователя в качестве аргумента.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("validationData")])]),t._v(" "),a("td",[a("code",[t._v("getValidationData")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("validator")])]),t._v(" "),a("td",[a("code",[t._v("getValidator")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("withValidator")])]),t._v(" "),a("td",[a("code",[t._v("withValidator")])]),t._v(" "),a("td",[t._v("Такое же поведение, но применяется только при работе в качестве контроллера.")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);